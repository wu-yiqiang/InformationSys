"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.register = void 0;
const vscode_languageserver_1 = require("vscode-languageserver");
const pugBeautify = require('pug-beautify');
function register() {
    return (pugDoc, options) => {
        const prefixesLength = pugDoc.pugCode.length - pugDoc.pugCode.trimStart().length;
        const suffixesLength = pugDoc.pugCode.length - pugDoc.pugCode.trimEnd().length;
        const prefixes = pugDoc.pugCode.substr(0, prefixesLength);
        const suffixes = pugDoc.pugCode.substr(pugDoc.pugCode.length - suffixesLength);
        const newPugCode = pugBeautify(pugDoc.pugCode, {
            tab_size: options.tabSize,
            fill_tab: !options.insertSpaces,
        });
        const replaceEdit = vscode_languageserver_1.TextEdit.replace(vscode_languageserver_1.Range.create(pugDoc.pugTextDocument.positionAt(0), pugDoc.pugTextDocument.positionAt(pugDoc.pugCode.length)), prefixes + newPugCode.trim() + suffixes);
        return [replaceEdit];
    };
}
exports.register = register;
//# sourceMappingURL=formatting.js.map